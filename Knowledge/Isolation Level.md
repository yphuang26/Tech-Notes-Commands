
在資料庫系統中，Isolation Level (隔離層級) 是控制交易 (Transaction) 彼此之間如何隔離，確保資料的一致性和完整性的一個層級設定。不同的隔離層級決定了交易能夠看到哪些其他交易的資料更新，並且如何防止常見的問題，例如**髒讀（Dirty Read）**、**不可重複讀（Non-Repeatable Read）** 和 **幻讀（Phantom Read）**。
### 四種隔離層級
---
SQL 標準定義了四種隔離層級，每個層級都有其特定的行為和效能影響：
#### 1. Read Uncommitted（讀取未提交）
- 最低的隔離層級
- 可以讀取到其他交易尚未提交的資料
- 問題: 可能會發生髒讀
- 特徵: 效能最好，但資料一致性最低
- 適用場合: 對資料一致性要求不高的場景 (如報表系統)
#### 2. Read Committed (讀取已提交)
- 只能讀取已經提交的資料
- 問題：防止髒讀，但仍可能發生不可重複讀
- 特徵：大多數資料庫的預設隔離層級（如 Oracle）
- 適用場合：讀取最新資料，且要求避免髒讀的場景
#### 3. Repeatable Read（可重複讀取）
- 在同一交易中，對相同資料的多次讀取結果相同，即鎖住讀取的資料
- 問題：防止髒讀和不可重複讀，但仍可能發生幻讀
- 特徵：提高資料一致性，但效能有所下降
- 適用場合：需要一致性更高的業務邏輯，如財務系統
#### 4. Serializable（序列化）
- 最高的隔離層級
- 完全序列化，交易完全隔離執行
- 避免所有並發問題
- 效能最差，但資料一致性最好
### 常見問題解析
---
#### 髒讀 (Dirty Read)
- 讀取了其他交易尚未提交的資料。
![[dirty_read.png|550]]
#### 不可重複讀 (Non-Repeatable Read)
- 同一交易中多次讀取結果不一致，因為其他交易更新了資料。
![[non-repeatable_read.png|550]]
#### 幻讀 (Phantom Read)
- 同一交易中兩次執行篩選條件時，結果集不同，因為其他交易插入或刪除了符合條件的記錄。
![[phantom_read.png|550]]
### 參考資料
---
- [(Medium) 資料庫 Isolation Levels](https://totoroliu.medium.com/%E8%B3%87%E6%96%99%E5%BA%AB-isolation-levels-c587d3103ba4)
